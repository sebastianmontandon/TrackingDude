"use strict";(()=>{var t={};t.id=476,t.ids=[476],t.modules={3524:t=>{t.exports=require("@prisma/client")},399:t=>{t.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:t=>{t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4785:(t,e,r)=>{r.r(e),r.d(e,{originalPathname:()=>x,patchFetch:()=>m,requestAsyncStorage:()=>d,routeModule:()=>g,serverHooks:()=>l,staticGenerationAsyncStorage:()=>h});var s={};r.r(s),r.d(s,{GET:()=>p,POST:()=>c});var a=r(9303),n=r(8716),o=r(670),i=r(7070);async function u(){let{prisma:t}=await r.e(538).then(r.bind(r,3538));return t}async function p(){try{let t=await u(),e=(await t.hosting.findMany({orderBy:{createdAt:"desc"}})).map(t=>({...t,registrationDate:t.registrationDate.toISOString().split("T")[0]}));return i.NextResponse.json(e)}catch(t){return console.error("Error fetching hostings:",t),i.NextResponse.json({error:"Error al obtener hostings"},{status:500})}}async function c(t){try{let e=await u(),{domain:r,provider:s,paymentType:a,includesHosting:n,registrationDate:o,baseCost:p}=await t.json(),c=.2*p,g=await e.hosting.create({data:{domain:r,provider:s,paymentType:a,includesHosting:n,registrationDate:new Date(o),baseCost:parseFloat(p),maintenanceFee:c,totalCost:p+c}}),d={...g,registrationDate:g.registrationDate.toISOString().split("T")[0]};return i.NextResponse.json(d,{status:201})}catch(t){return console.error("Error creating hosting:",t),i.NextResponse.json({error:"Error al crear hosting"},{status:500})}}let g=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/hostings/route",pathname:"/api/hostings",filename:"route",bundlePath:"app/api/hostings/route"},resolvedPagePath:"C:\\Users\\Stepha Vargas\\Documents\\TrackingDude\\src\\app\\api\\hostings\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:h,serverHooks:l}=g,x="/api/hostings/route";function m(){return(0,o.patchFetch)({serverHooks:l,staticGenerationAsyncStorage:h})}}};var e=require("../../../webpack-runtime.js");e.C(t);var r=t=>e(e.s=t),s=e.X(0,[276,972],()=>r(4785));module.exports=s})();