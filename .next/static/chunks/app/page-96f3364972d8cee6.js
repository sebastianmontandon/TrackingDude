(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8987:function(e,s,a){Promise.resolve().then(a.bind(a,6020))},6020:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return ee}});var t=a(7437),i=a(2265),l=a(2489),n=a(9637),r=a(6137),c=a(4766);let o=e=>{let{icon:s,label:a,active:i=!1,onClick:l}=e;return(0,t.jsx)("li",{children:(0,t.jsxs)("button",{onClick:l,className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 ".concat(i?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:text-foreground hover:bg-accent"),children:[(0,t.jsx)("span",{className:"text-lg",children:s}),(0,t.jsx)("span",{className:"font-medium",children:a})]})})};var d=e=>{let{onNavigate:s,currentPage:a,onClose:i}=e;return(0,t.jsxs)("aside",{className:"w-full h-full bg-card border-r border-border flex flex-col shadow-sm",children:[(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",children:(0,t.jsx)("img",{src:"/favicon.png",alt:"Logo",className:"w-full h-full object-cover"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-lg font-bold text-foreground",children:"TrackingDude"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Gesti\xf3n de Dominios"})]})]}),i&&(0,t.jsx)("button",{onClick:i,className:"lg:hidden p-2 rounded-md text-muted-foreground hover:text-foreground hover:bg-accent",children:(0,t.jsx)(l.Z,{size:20})})]})}),(0,t.jsx)("div",{className:"flex-1 px-3 py-2",children:(0,t.jsxs)("nav",{children:[(0,t.jsx)("div",{className:"mb-4 px-3",children:(0,t.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Men\xfa Principal"})}),(0,t.jsxs)("ul",{className:"space-y-1",children:[(0,t.jsx)(o,{icon:(0,t.jsx)(n.Z,{size:18}),label:"Dashboard",active:"domains"===a,onClick:()=>s("domains")}),(0,t.jsx)(o,{icon:(0,t.jsx)(r.Z,{size:18}),label:"Hosting",active:"hosting"===a,onClick:()=>s("hosting")}),(0,t.jsx)(o,{icon:(0,t.jsx)(c.Z,{size:18}),label:"Notificaciones",active:"notifications"===a,onClick:()=>s("notifications")})]})]})}),(0,t.jsx)("div",{className:"p-4 border-t border-border",children:(0,t.jsx)("div",{className:"text-xs text-muted-foreground text-center",children:"\xa9 2024 TrackingDude"})})]})},m=a(9202),x=a(5302),h=a(1047),u=a(3639);let p=(0,i.createContext)(void 0),j=e=>{let{children:s}=e,[a,l]=(0,i.useState)([]),[n,r]=(0,i.useState)(!0),[c,o]=(0,i.useState)(null);(0,i.useEffect)(()=>{d()},[]);let d=async()=>{try{r(!0);let e=await fetch("/api/domains");if(!e.ok)throw Error("Error al cargar dominios");let s=await e.json();l(s),o(null)}catch(e){o(e instanceof Error?e.message:"Error desconocido"),console.error("Error fetching domains:",e)}finally{r(!1)}},m=async e=>{try{r(!0);let s=await fetch("/api/domains",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw Error("Error al crear dominio");let a=await s.json();l(e=>[...e,a]),o(null)}catch(e){throw o(e instanceof Error?e.message:"Error desconocido"),console.error("Error adding domain:",e),e}finally{r(!1)}},x=async e=>{try{if(r(!0),!(await fetch("/api/domains/".concat(e),{method:"DELETE"})).ok)throw Error("Error al eliminar dominio");l(s=>s.filter(s=>s.id!==e)),o(null)}catch(e){throw o(e instanceof Error?e.message:"Error desconocido"),console.error("Error removing domain:",e),e}finally{r(!1)}},h=async e=>{await new Promise(e=>setTimeout(e,500));let s=a.some(s=>s.name.toLowerCase()===e.toLowerCase());return s?!s:Math.random()>.3};return(0,t.jsx)(p.Provider,{value:{domains:a,addDomain:m,removeDomain:x,checkDomainAvailability:h,loading:n,error:c},children:s})},g=()=>{let e=(0,i.useContext)(p);if(void 0===e)throw Error("useDomainContext must be used within a DomainProvider");return e},f=e=>{let{title:s,value:a,icon:i,color:l,description:n}=e;return(0,t.jsx)("div",{className:"bg-card p-6 rounded-xl border border-border shadow-sm hover:shadow-md transition-all duration-200 hover:scale-105 group",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:s}),(0,t.jsx)("p",{className:"text-3xl font-bold text-foreground",children:a}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:n})]}),(0,t.jsx)("div",{className:"p-4 rounded-full ".concat(l," group-hover:scale-110 transition-transform duration-200"),children:i})]})})};var N=()=>{let{domains:e}=g(),s=e.length,a=new Date,i=e.filter(e=>new Date(e.expirationDate)<a).length,l=e.filter(e=>{let s=Math.ceil((new Date(e.expirationDate).getTime()-a.getTime())/864e5);return s>0&&s<=30}).length;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f,{title:"Total de Dominios",value:s,icon:(0,t.jsx)(m.Z,{className:"w-6 h-6 text-white"}),color:"bg-blue-500",description:"Dominios registrados"}),(0,t.jsx)(f,{title:"Dominios Activos",value:s-i-l,icon:(0,t.jsx)(x.Z,{className:"w-6 h-6 text-white"}),color:"bg-green-500",description:"Funcionando correctamente"}),(0,t.jsx)(f,{title:"Por Vencer",value:l,icon:(0,t.jsx)(h.Z,{className:"w-6 h-6 text-white"}),color:"bg-yellow-500",description:"Pr\xf3ximos a expirar"}),(0,t.jsx)(f,{title:"Vencidos",value:i,icon:(0,t.jsx)(u.Z,{className:"w-6 h-6 text-white"}),color:"bg-red-500",description:"Requieren renovaci\xf3n"})]})},b=a(9397),v=a(5863),y=a(401);function w(){let e=new Date,s=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),t=String(e.getDate()).padStart(2,"0");return"".concat(s,"-").concat(a,"-").concat(t)}function k(e){let s="string"==typeof e?new Date(e):e,a=s.getFullYear(),t=String(s.getMonth()+1).padStart(2,"0"),i=String(s.getDate()).padStart(2,"0");return"".concat(a,"-").concat(t,"-").concat(i)}var C=()=>{let{addDomain:e,checkDomainAvailability:s}=g(),[a,n]=(0,i.useState)(""),[r,c]=(0,i.useState)(w()),[o,d]=(0,i.useState)(""),[m,x]=(0,i.useState)("1 year"),[h,u]=(0,i.useState)(!1),[p,j]=(0,i.useState)(!1),[f,N]=(0,i.useState)(null),k=w(),C=async()=>{a&&(j(!0),N(await s(a)),j(!1))},E=async s=>{if(s.preventDefault(),a&&r&&o&&m)try{await e({name:a,creationDate:r,website:o,paymentPeriod:m}),n(""),c(w()),d(""),x("1 year"),N(null)}catch(e){console.error("Error al agregar dominio:",e)}};return(0,t.jsxs)("div",{className:"form-section",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4 sm:mb-6",children:[(0,t.jsx)(b.Z,{className:"h-5 w-5 text-primary"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Nuevo Dominio"})]}),(0,t.jsxs)("form",{onSubmit:E,className:"space-y-4 sm:space-y-6",children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"domain-name",className:"form-label",children:"Nombre del dominio *"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{id:"domain-name",type:"text",value:a,onChange:e=>{n(e.target.value),N(null)},onBlur:C,className:"form-input pr-10",placeholder:"ejemplo.com",required:!0}),p&&(0,t.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:(0,t.jsx)(v.Z,{size:16,className:"text-muted-foreground animate-spin"})}),null!==f&&!p&&(0,t.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:f?(0,t.jsx)(y.Z,{size:16,className:"text-green-500"}):(0,t.jsx)(l.Z,{size:16,className:"text-red-500"})})]}),!1===f&&(0,t.jsx)("p",{className:"text-sm text-red-500 mt-1",children:"Este dominio no est\xe1 disponible"})]}),(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("input",{type:"checkbox",id:"check-availability",checked:h,onChange:()=>u(!h),className:"mt-1 h-4 w-4 rounded border-input text-primary focus:ring-primary"}),(0,t.jsx)("label",{htmlFor:"check-availability",className:"text-sm text-muted-foreground leading-relaxed",children:"Verificar disponibilidad del dominio usando la API de Hostinger"})]}),(0,t.jsxs)("div",{className:"form-grid",children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"creation-date",className:"form-label",children:"Fecha de creaci\xf3n *"}),(0,t.jsx)("input",{id:"creation-date",type:"date",value:r,onChange:e=>c(e.target.value),max:k,className:"form-input",required:!0}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Solo se permiten fechas hasta el d\xeda de hoy"})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"payment-period",className:"form-label",children:"Per\xedodo de pago *"}),(0,t.jsxs)("select",{id:"payment-period",value:m,onChange:e=>x(e.target.value),className:"form-input",required:!0,children:[(0,t.jsx)("option",{value:"1 year",children:"1 a\xf1o"}),(0,t.jsx)("option",{value:"2 years",children:"2 a\xf1os"}),(0,t.jsx)("option",{value:"3 years",children:"3 a\xf1os"})]})]})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"website",className:"form-label",children:"Sitio web de registro *"}),(0,t.jsx)("input",{id:"website",type:"url",value:o,onChange:e=>d(e.target.value),className:"form-input",placeholder:"https://ejemplo.com",required:!0}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"URL del proveedor donde registraste el dominio"})]}),(0,t.jsx)("div",{className:"flex flex-col sm:flex-row justify-end pt-4 gap-3",children:(0,t.jsx)("button",{type:"submit",className:"btn-primary w-full sm:w-auto min-w-[120px]",disabled:!a||!r||!o||!m||h&&!1===f,children:"Agregar Dominio"})})]})]})},E=a(8842),D=a(6362),S=a(2252),Z=a(3245),z=a(8930),F=a(5326),T=e=>{let{isOpen:s,onClose:a,onConfirm:i,title:n,message:r,confirmText:c="Confirmar",cancelText:o="Cancelar",type:d="danger"}=e,m=(()=>{switch(d){case"danger":default:return{icon:(0,t.jsx)(u.Z,{className:"w-6 h-6 text-red-500"}),confirmButton:"bg-red-600 hover:bg-red-700 focus:ring-red-500",iconBg:"bg-red-100 dark:bg-red-900/20"};case"warning":return{icon:(0,t.jsx)(u.Z,{className:"w-6 h-6 text-yellow-500"}),confirmButton:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500",iconBg:"bg-yellow-100 dark:bg-yellow-900/20"};case"info":return{icon:(0,t.jsx)(u.Z,{className:"w-6 h-6 text-blue-500"}),confirmButton:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500",iconBg:"bg-blue-100 dark:bg-blue-900/20"}}})();return(0,t.jsx)(F.fC,{open:s,onOpenChange:a,children:(0,t.jsxs)(F.h_,{children:[(0,t.jsx)(F.aV,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40 animate-in fade-in-0"}),(0,t.jsx)(F.VY,{className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-50 w-full max-w-md p-6 bg-card border border-border rounded-lg shadow-lg animate-in fade-in-0 zoom-in-95",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ".concat(m.iconBg),children:m.icon}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)(F.Dx,{className:"text-lg font-semibold text-foreground mb-2",children:n}),(0,t.jsx)(F.dk,{className:"text-sm text-muted-foreground mb-6",children:r}),(0,t.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,t.jsx)(F.x8,{asChild:!0,children:(0,t.jsx)("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-foreground bg-secondary hover:bg-secondary/80 border border-border rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:o})}),(0,t.jsx)("button",{type:"button",onClick:()=>{i(),a()},className:"px-4 py-2 text-sm font-medium text-white rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 ".concat(m.confirmButton),children:c})]})]}),(0,t.jsx)(F.x8,{asChild:!0,children:(0,t.jsx)("button",{type:"button",className:"absolute top-4 right-4 text-muted-foreground hover:text-foreground transition-colors","aria-label":"Cerrar",children:(0,t.jsx)(l.Z,{size:16})})})]})})]})})},P=()=>{let{domains:e,removeDomain:s}=g(),[a,l]=(0,i.useState)("name"),[n,r]=(0,i.useState)("asc"),[c,o]=(0,i.useState)({isOpen:!1,domainId:"",domainName:""}),d=e=>{a===e?r("asc"===n?"desc":"asc"):(l(e),r("asc"))},x=e=>{let s=new Date,a=Math.ceil((new Date(e).getTime()-s.getTime())/864e5);return a<0?{status:"expired",color:"text-red-500",bgColor:"bg-red-500"}:a<30?{status:"expiring soon",color:"text-yellow-500",bgColor:"bg-yellow-500"}:{status:"active",color:"text-green-500",bgColor:"bg-green-500"}},h=(e,s)=>{o({isOpen:!0,domainId:e,domainName:s})},u=async()=>{try{await s(c.domainId)}catch(e){console.error("Error eliminando dominio:",e)}},p=[...e].sort((e,s)=>{let t=0;return e[a]<s[a]?t=-1:e[a]>s[a]&&(t=1),"asc"===n?t:-t});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"form-section domains-table",children:(0,t.jsx)("div",{className:"table-container",children:(0,t.jsxs)("table",{className:"table-responsive",children:[(0,t.jsx)("thead",{className:"table-header",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{scope:"col",className:"table-header-cell col-name",onClick:()=>d("name"),children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"hidden sm:inline",children:"Nombre"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Dom."}),(0,t.jsx)(E.Z,{size:14})]})}),(0,t.jsx)("th",{scope:"col",className:"table-header-cell col-creation hidden md:table-cell",onClick:()=>d("creationDate"),children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["Fecha de creaci\xf3n",(0,t.jsx)(E.Z,{size:14})]})}),(0,t.jsx)("th",{scope:"col",className:"table-header-cell col-website hidden lg:table-cell",onClick:()=>d("website"),children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["Sitio web",(0,t.jsx)(E.Z,{size:14})]})}),(0,t.jsx)("th",{scope:"col",className:"table-header-cell col-period hidden sm:table-cell",onClick:()=>d("paymentPeriod"),children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["Per\xedodo",(0,t.jsx)(E.Z,{size:14})]})}),(0,t.jsx)("th",{scope:"col",className:"table-header-cell col-expiration",onClick:()=>d("expirationDate"),children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"hidden sm:inline",children:"Vencimiento"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Venc."}),(0,t.jsx)(E.Z,{size:14})]})}),(0,t.jsx)("th",{scope:"col",className:"table-header-cell col-actions",children:(0,t.jsx)("span",{className:"sr-only",children:"Acciones"})})]})}),(0,t.jsxs)("tbody",{className:"table-body",children:[p.map(e=>{let s=x(e.expirationDate);return(0,t.jsxs)("tr",{className:"table-row",children:[(0,t.jsx)("td",{className:"table-cell col-name",children:(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"table-cell-text-primary truncate",children:e.name}),(0,t.jsxs)("div",{className:"md:hidden table-cell-text-secondary text-xs mt-1 space-y-1",children:[(0,t.jsx)("div",{className:"truncate",children:e.creationDate}),(0,t.jsx)("div",{className:"lg:hidden truncate",children:(0,t.jsxs)("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80 transition-colors inline-flex items-center gap-1",children:[(0,t.jsx)("span",{className:"truncate",children:e.website}),(0,t.jsx)(D.Z,{size:10,className:"flex-shrink-0"})]})})]})]})}),(0,t.jsx)("td",{className:"table-cell col-creation hidden md:table-cell",children:(0,t.jsx)("div",{className:"table-cell-text-secondary",children:e.creationDate})}),(0,t.jsx)("td",{className:"table-cell col-website hidden lg:table-cell",children:(0,t.jsxs)("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"table-cell-text text-primary hover:text-primary/80 transition-colors inline-flex items-center gap-1 max-w-full truncate",children:[(0,t.jsx)("span",{className:"truncate",children:e.website}),(0,t.jsx)(D.Z,{size:12,className:"flex-shrink-0"})]})}),(0,t.jsx)("td",{className:"table-cell col-period hidden sm:table-cell",children:(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-secondary text-secondary-foreground",children:e.paymentPeriod})}),(0,t.jsx)("td",{className:"table-cell col-expiration",children:(0,t.jsx)("div",{className:"min-w-0",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"inline-block w-2 h-2 rounded-full flex-shrink-0 ".concat(s.bgColor)}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("span",{className:"table-cell-text ".concat(s.color," font-medium block truncate"),children:e.expirationDate}),(0,t.jsx)("div",{className:"sm:hidden table-cell-text-secondary text-xs mt-1",children:e.paymentPeriod})]}),"active"!==s.status&&(0,t.jsx)("span",{className:"flex-shrink-0",children:"expired"===s.status?(0,t.jsx)(S.Z,{size:16,className:"text-red-500"}):(0,t.jsx)(Z.Z,{size:16,className:"text-yellow-500"})})]})})}),(0,t.jsx)("td",{className:"table-cell col-actions text-right",children:(0,t.jsx)("button",{onClick:()=>h(e.id,e.name),className:"text-red-500 hover:text-red-400 transition-colors p-1.5 rounded-md hover:bg-red-900/20",title:"Eliminar dominio",children:(0,t.jsx)(z.Z,{size:14})})})]},e.id)}),0===e.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:6,className:"table-cell text-center text-muted-foreground py-8",children:(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,t.jsx)(m.Z,{className:"w-8 h-8 text-muted-foreground/50"}),(0,t.jsx)("span",{children:"No hay dominios registrados"}),(0,t.jsx)("span",{className:"text-xs",children:"\xa1Agrega tu primer dominio arriba!"})]})})})]})]})})}),(0,t.jsx)(T,{isOpen:c.isOpen,onClose:()=>{o({isOpen:!1,domainId:"",domainName:""})},onConfirm:u,title:"Confirmar eliminaci\xf3n",message:'\xbfEst\xe1s seguro de que quieres eliminar el dominio "'.concat(c.domainName,'"? Esta acci\xf3n no se puede deshacer.'),confirmText:"Eliminar",cancelText:"Cancelar",type:"danger"})]})};function M(){return(0,t.jsxs)("div",{className:"page-container",children:[(0,t.jsxs)("div",{className:"section-header",children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold tracking-tight text-foreground",children:"Dashboard de Dominios"}),(0,t.jsx)("p",{className:"section-description",children:"Gestiona y supervisa todos tus dominios desde aqu\xed. Mant\xe9n un control completo de tus activos digitales."})]}),(0,t.jsxs)("div",{className:"content-section",children:[(0,t.jsxs)("div",{className:"section-header",children:[(0,t.jsx)("h2",{className:"section-title",children:"Resumen General"}),(0,t.jsx)("p",{className:"section-description",children:"Vista general del estado de todos tus dominios"})]}),(0,t.jsx)("div",{className:"stats-grid",children:(0,t.jsx)(N,{})})]}),(0,t.jsxs)("div",{className:"content-section",children:[(0,t.jsxs)("div",{className:"section-header",children:[(0,t.jsx)("h2",{className:"section-title",children:"Agregar Nuevo Dominio"}),(0,t.jsx)("p",{className:"section-description",children:"Registra un nuevo dominio en tu sistema de gesti\xf3n"})]}),(0,t.jsx)(C,{})]}),(0,t.jsxs)("div",{className:"content-section",children:[(0,t.jsxs)("div",{className:"section-header",children:[(0,t.jsx)("h2",{className:"section-title",children:"Lista de Dominios"}),(0,t.jsx)("p",{className:"section-description",children:"Todos tus dominios registrados con informaci\xf3n detallada"})]}),(0,t.jsx)(P,{})]})]})}let O=(0,i.createContext)(void 0),A=e=>{let{children:s}=e,[a,l]=(0,i.useState)([]),[n,r]=(0,i.useState)(!0),[c,o]=(0,i.useState)(null);(0,i.useEffect)(()=>{d()},[]);let d=async()=>{try{r(!0);let e=await fetch("/api/hostings");if(!e.ok)throw Error("Error al cargar hostings");let s=await e.json();l(s),o(null)}catch(e){o(e instanceof Error?e.message:"Error desconocido"),console.error("Error fetching hostings:",e)}finally{r(!1)}},m=async e=>{try{r(!0);let s=await fetch("/api/hostings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw Error("Error al crear hosting");let a=await s.json();l(e=>[...e,a]),o(null)}catch(e){throw o(e instanceof Error?e.message:"Error desconocido"),console.error("Error adding hosting:",e),e}finally{r(!1)}},x=async e=>{try{if(r(!0),!(await fetch("/api/hostings/".concat(e),{method:"DELETE"})).ok)throw Error("Error al eliminar hosting");l(s=>s.filter(s=>s.id!==e)),o(null)}catch(e){throw o(e instanceof Error?e.message:"Error desconocido"),console.error("Error removing hosting:",e),e}finally{r(!1)}};return(0,t.jsx)(O.Provider,{value:{hostings:a,addHosting:m,removeHosting:x,loading:n,error:c},children:s})},q=()=>{let e=(0,i.useContext)(O);if(void 0===e)throw Error("useHostingContext must be used within a HostingProvider");return e};var B=()=>{let{addHosting:e}=q(),[s,a]=(0,i.useState)(""),[l,n]=(0,i.useState)(""),[c,o]=(0,i.useState)("Monthly"),[d,m]=(0,i.useState)(!0),[x,h]=(0,i.useState)(w()),[u,p]=(0,i.useState)(""),j=w(),g=e=>{m(e),e||a("")},f=async t=>{if(t.preventDefault(),l&&c&&x&&u&&(!d||s))try{await e({domain:d?s:"",provider:l,paymentType:c,includesHosting:d,registrationDate:x,baseCost:parseFloat(u)}),a(""),n(""),o("Monthly"),m(!0),h(w()),p("")}catch(e){console.error("Error al agregar hosting:",e)}};return(0,t.jsxs)("div",{className:"form-section",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4 sm:mb-6",children:[(0,t.jsx)(r.Z,{className:"h-5 w-5 text-primary"}),(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Nuevo Hosting"})]}),(0,t.jsxs)("form",{onSubmit:f,className:"space-y-4 sm:space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("input",{type:"checkbox",id:"includes-hosting",checked:d,onChange:e=>g(e.target.checked),className:"mt-1 h-4 w-4 rounded border-input text-primary focus:ring-primary"}),(0,t.jsx)("label",{htmlFor:"includes-hosting",className:"text-sm text-muted-foreground leading-relaxed",children:"El servicio incluye hosting web (no solo dominio)"})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsxs)("label",{htmlFor:"domain",className:"form-label",children:["Dominio ",d&&"*"]}),(0,t.jsx)("input",{id:"domain",type:"text",value:s,onChange:e=>a(e.target.value),className:"form-input ".concat(d?"":"opacity-50 cursor-not-allowed"),placeholder:d?"ejemplo.com":"No se requiere dominio",disabled:!d,required:d}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:d?"Ingresa el nombre del dominio para el cual configurar\xe1s el hosting":"Campo deshabilitado porque el servicio no incluye hosting web"})]}),(0,t.jsxs)("div",{className:"form-grid",children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"provider",className:"form-label",children:"Proveedor *"}),(0,t.jsx)("input",{id:"provider",type:"text",value:l,onChange:e=>n(e.target.value),className:"form-input",placeholder:"ej. HostGator, SiteGround",required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"payment-type",className:"form-label",children:"Tipo de pago *"}),(0,t.jsxs)("select",{id:"payment-type",value:c,onChange:e=>o(e.target.value),className:"form-input",required:!0,children:[(0,t.jsx)("option",{value:"Monthly",children:"Mensual"}),(0,t.jsx)("option",{value:"Annual",children:"Anual"}),(0,t.jsx)("option",{value:"Biennial",children:"Bienal"})]})]})]}),(0,t.jsxs)("div",{className:"form-grid",children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"registration-date",className:"form-label",children:"Fecha de alta *"}),(0,t.jsx)("input",{id:"registration-date",type:"date",value:x,onChange:e=>h(e.target.value),max:j,className:"form-input",required:!0}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Solo se permiten fechas hasta el d\xeda de hoy"})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"base-cost",className:"form-label",children:"Costo base *"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{id:"base-cost",type:"number",value:u,onChange:e=>p(e.target.value),className:"form-input pl-8",placeholder:"0.00",step:"0.01",min:"0",required:!0}),(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"$"})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Se calcular\xe1 autom\xe1ticamente una tarifa de mantenimiento del 20%"})]})]}),(0,t.jsx)("div",{className:"flex flex-col sm:flex-row justify-end pt-4 gap-3",children:(0,t.jsx)("button",{type:"submit",className:"btn-primary w-full sm:w-auto min-w-[120px]",disabled:!l||!c||!x||!u||d&&!s,children:"Agregar Hosting"})})]})]})},H=a(5131),L=a(5252),Y=()=>{let{hostings:e,removeHosting:s}=q(),[a,l]=(0,i.useState)("domain"),[n,c]=(0,i.useState)("asc"),[o,d]=(0,i.useState)({isOpen:!1,hostingId:"",hostingDomain:""}),m=e=>{a===e?c("asc"===n?"desc":"asc"):(l(e),c("asc"))},h=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),u=e=>{switch(e){case"Monthly":return"bg-blue-500";case"Annual":return"bg-green-500";case"Biennial":return"bg-purple-500";default:return"bg-gray-500"}},p=e=>{switch(e){case"Monthly":return"Mensual";case"Annual":return"Anual";case"Biennial":return"Bienal";default:return e}},j=(e,s)=>{d({isOpen:!0,hostingId:e,hostingDomain:s})},g=async()=>{try{await s(o.hostingId)}catch(e){console.error("Error eliminando hosting:",e)}},f=[...e].sort((e,s)=>{let t=0,i=e[a],l=s[a];return i<l?t=-1:i>l&&(t=1),"asc"===n?t:-t});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"form-section hosting-table",children:(0,t.jsx)("div",{className:"table-container",children:(0,t.jsxs)("table",{className:"table-responsive",children:[(0,t.jsx)("thead",{className:"table-header",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{scope:"col",className:"table-header-cell col-domain",onClick:()=>m("domain"),children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"hidden sm:inline",children:"Dominio"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Dom."}),(0,t.jsx)(E.Z,{size:12})]})}),(0,t.jsx)("th",{scope:"col",className:"table-header-cell col-provider hidden md:table-cell",onClick:()=>m("provider"),children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{children:"Proveedor"}),(0,t.jsx)(E.Z,{size:12})]})}),(0,t.jsx)("th",{scope:"col",className:"table-header-cell col-payment hidden lg:table-cell",onClick:()=>m("paymentType"),children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{children:"Tipo"}),(0,t.jsx)(E.Z,{size:12})]})}),(0,t.jsx)("th",{scope:"col",className:"table-header-cell col-includes hidden xl:table-cell",onClick:()=>m("includesHosting"),children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{children:"Host."}),(0,t.jsx)(E.Z,{size:12})]})}),(0,t.jsx)("th",{scope:"col",className:"table-header-cell col-date hidden lg:table-cell",onClick:()=>m("registrationDate"),children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{children:"Fecha"}),(0,t.jsx)(E.Z,{size:12})]})}),(0,t.jsx)("th",{scope:"col",className:"table-header-cell col-base-cost hidden md:table-cell",onClick:()=>m("baseCost"),children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{children:"Base"}),(0,t.jsx)(E.Z,{size:12})]})}),(0,t.jsx)("th",{scope:"col",className:"table-header-cell col-maintenance hidden xl:table-cell",children:(0,t.jsx)("span",{children:"Mant."})}),(0,t.jsx)("th",{scope:"col",className:"table-header-cell col-total",onClick:()=>m("totalCost"),children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"hidden sm:inline",children:"Total"}),(0,t.jsx)("span",{className:"sm:hidden",children:"$"}),(0,t.jsx)(E.Z,{size:12})]})}),(0,t.jsx)("th",{scope:"col",className:"table-header-cell col-actions",children:(0,t.jsx)("span",{className:"sr-only",children:"Acciones"})})]})}),(0,t.jsxs)("tbody",{className:"table-body",children:[f.map(e=>(0,t.jsxs)("tr",{className:"table-row",children:[(0,t.jsx)("td",{className:"table-cell col-domain",children:(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"table-cell-text-primary truncate",children:e.domain}),(0,t.jsxs)("div",{className:"md:hidden table-cell-text-secondary text-xs mt-1 space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"truncate",children:e.provider}),(0,t.jsx)("span",{className:"inline-block w-2 h-2 rounded-full flex-shrink-0 ".concat(u(e.paymentType))})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[e.includesHosting?(0,t.jsx)(x.Z,{className:"h-3 w-3 text-green-500 flex-shrink-0"}):(0,t.jsx)(H.Z,{className:"h-3 w-3 text-red-500 flex-shrink-0"}),(0,t.jsx)("span",{className:"text-xs truncate",children:e.includesHosting?"Con hosting":"Solo dominio"})]})]})]})}),(0,t.jsx)("td",{className:"table-cell col-provider hidden md:table-cell",children:(0,t.jsx)("div",{className:"table-cell-text-secondary truncate",children:e.provider})}),(0,t.jsx)("td",{className:"table-cell col-payment hidden lg:table-cell",children:(0,t.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium text-white ".concat(u(e.paymentType)),children:p(e.paymentType).substring(0,3)})}),(0,t.jsx)("td",{className:"table-cell col-includes hidden xl:table-cell",children:(0,t.jsx)("div",{className:"flex items-center justify-center",children:e.includesHosting?(0,t.jsx)(x.Z,{className:"h-4 w-4 text-green-500"}):(0,t.jsx)(H.Z,{className:"h-4 w-4 text-red-500"})})}),(0,t.jsx)("td",{className:"table-cell col-date hidden lg:table-cell",children:(0,t.jsx)("div",{className:"table-cell-text-secondary truncate text-xs",children:e.registrationDate})}),(0,t.jsx)("td",{className:"table-cell col-base-cost hidden md:table-cell",children:(0,t.jsx)("div",{className:"table-cell-text-secondary text-xs truncate",children:h(e.baseCost)})}),(0,t.jsx)("td",{className:"table-cell col-maintenance hidden xl:table-cell",children:(0,t.jsx)("div",{className:"text-xs text-green-600 dark:text-green-400 truncate",children:h(e.maintenanceFee)})}),(0,t.jsx)("td",{className:"table-cell col-total",children:(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"table-cell-text font-semibold text-primary truncate text-sm",children:h(e.totalCost)}),(0,t.jsxs)("div",{className:"md:hidden table-cell-text-secondary text-xs mt-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(L.Z,{className:"h-3 w-3 flex-shrink-0"}),(0,t.jsxs)("span",{className:"truncate",children:["Base: ",h(e.baseCost)]})]}),(0,t.jsx)("div",{className:"lg:hidden mt-1 text-xs truncate",children:e.registrationDate})]})]})}),(0,t.jsx)("td",{className:"table-cell col-actions text-right",children:(0,t.jsx)("button",{onClick:()=>j(e.id,e.domain),className:"text-red-500 hover:text-red-400 transition-colors p-1.5 rounded-md hover:bg-red-900",title:"Eliminar hosting",children:(0,t.jsx)(z.Z,{size:14})})})]},e.id)),0===e.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:9,className:"table-cell text-center text-muted-foreground py-8",children:(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,t.jsx)(r.Z,{className:"w-8 h-8 text-muted-foreground/50"}),(0,t.jsx)("span",{children:"No hay servicios de hosting registrados"}),(0,t.jsx)("span",{className:"text-xs",children:"\xa1Agrega tu primer hosting arriba!"})]})})})]})]})})}),(0,t.jsx)(T,{isOpen:o.isOpen,onClose:()=>{d({isOpen:!1,hostingId:"",hostingDomain:""})},onConfirm:g,title:"Confirmar eliminaci\xf3n",message:'\xbfEst\xe1s seguro de que quieres eliminar el hosting para "'.concat(o.hostingDomain,'"? Esta acci\xf3n no se puede deshacer.'),confirmText:"Eliminar",cancelText:"Cancelar",type:"danger"})]})};function I(){return(0,t.jsxs)("div",{className:"page-container",children:[(0,t.jsxs)("div",{className:"section-header",children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold tracking-tight text-foreground",children:"Gesti\xf3n de Hosting"}),(0,t.jsx)("p",{className:"section-description",children:"Administra tus servicios de hosting y servidores. Controla costos y mant\xe9n un seguimiento de todos tus servicios."})]}),(0,t.jsxs)("div",{className:"content-section",children:[(0,t.jsxs)("div",{className:"section-header",children:[(0,t.jsx)("h2",{className:"section-title",children:"Agregar Nuevo Hosting"}),(0,t.jsx)("p",{className:"section-description",children:"Registra un nuevo servicio de hosting en tu sistema"})]}),(0,t.jsx)(B,{})]}),(0,t.jsxs)("div",{className:"content-section",children:[(0,t.jsxs)("div",{className:"section-header",children:[(0,t.jsx)("h2",{className:"section-title",children:"Servicios de Hosting"}),(0,t.jsx)("p",{className:"section-description",children:"Todos tus servicios de hosting con informaci\xf3n de costos y configuraci\xf3n"})]}),(0,t.jsx)(Y,{})]})]})}var _=a(9345),V=a(3417);let G=(0,i.createContext)(void 0),R=e=>{let{children:s}=e,[a,l]=(0,i.useState)([]),[n,r]=(0,i.useState)(!0),[c,o]=(0,i.useState)(null);(0,i.useEffect)(()=>{d()},[]);let d=async()=>{try{r(!0);let e=await fetch("/api/notifications");if(!e.ok)throw Error("Error al cargar notificaciones");let s=await e.json();l(s),o(null)}catch(e){o(e instanceof Error?e.message:"Error desconocido"),console.error("Error fetching notifications:",e)}finally{r(!1)}},m=async e=>{try{r(!0);let s=await fetch("/api/notifications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw Error("Error al crear notificaci\xf3n");let a=await s.json();l(e=>[...e,a]),o(null)}catch(e){throw o(e instanceof Error?e.message:"Error desconocido"),console.error("Error adding notification:",e),e}finally{r(!1)}},x=async e=>{try{if(r(!0),!(await fetch("/api/notifications/".concat(e),{method:"DELETE"})).ok)throw Error("Error al eliminar notificaci\xf3n");l(s=>s.filter(s=>s.id!==e)),o(null)}catch(e){throw o(e instanceof Error?e.message:"Error desconocido"),console.error("Error removing notification:",e),e}finally{r(!1)}};return(0,t.jsx)(G.Provider,{value:{notifications:a,addNotification:m,removeNotification:x,loading:n,error:c},children:s})},W=()=>{let e=(0,i.useContext)(G);if(void 0===e)throw Error("useNotificationContext must be used within a NotificationProvider");return e};var J=e=>{let{type:s}=e,{notifications:a,removeNotification:l}=W(),[n,o]=(0,i.useState)("domain"),[d,x]=(0,i.useState)("asc"),[u,p]=(0,i.useState)({isOpen:!1,notificationId:"",notificationDomain:""}),j=a.filter(e=>e.type===s),g=e=>{n===e?x("asc"===d?"desc":"asc"):(o(e),x("asc"))},f=e=>{switch(e.toLowerCase()){case"email":return{color:"bg-blue-500",label:"Email"};case"whatsapp":return{color:"bg-green-600",label:"WhatsApp"};default:return{color:"bg-gray-500",label:e}}},N=(e,s)=>{p({isOpen:!0,notificationId:e,notificationDomain:s})},b=async()=>{try{await l(u.notificationId)}catch(e){console.error("Error eliminando notificaci\xf3n:",e)}},v=[...j].sort((e,s)=>{let a=0,t=e[n],i=s[n];return t<i?a=-1:t>i&&(a=1),"asc"===d?a:-a});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"form-section notification-table",children:(0,t.jsx)("div",{className:"table-container",children:(0,t.jsxs)("table",{className:"table-responsive",children:[(0,t.jsx)("thead",{className:"table-header",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{scope:"col",className:"table-header-cell col-domain",onClick:()=>g("domain"),children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:["domain"===s?(0,t.jsx)(m.Z,{size:14,className:"text-muted-foreground"}):(0,t.jsx)(r.Z,{size:14,className:"text-muted-foreground"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"domain"===s?"Dominio":"Servicio"}),(0,t.jsx)("span",{className:"sm:hidden",children:"domain"===s?"Dom.":"Serv."}),(0,t.jsx)(E.Z,{size:12})]})}),(0,t.jsx)("th",{scope:"col",className:"table-header-cell col-provider hidden md:table-cell",onClick:()=>g("provider"),children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{children:"Proveedor"}),(0,t.jsx)(E.Z,{size:12})]})}),(0,t.jsx)("th",{scope:"col",className:"table-header-cell col-date hidden lg:table-cell",onClick:()=>g("notificationDate"),children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(h.Z,{size:14,className:"text-muted-foreground"}),(0,t.jsx)("span",{children:"Fecha"}),(0,t.jsx)(E.Z,{size:12})]})}),(0,t.jsx)("th",{scope:"col",className:"table-header-cell col-method",onClick:()=>g("notificationMethod"),children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(c.Z,{size:14,className:"text-muted-foreground"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"M\xe9todo"}),(0,t.jsx)("span",{className:"sm:hidden",children:"M\xe9t."}),(0,t.jsx)(E.Z,{size:12})]})}),(0,t.jsx)("th",{scope:"col",className:"table-header-cell col-actions",children:(0,t.jsx)("span",{className:"sr-only",children:"Acciones"})})]})}),(0,t.jsxs)("tbody",{className:"table-body",children:[v.map(e=>{let a=f(e.notificationMethod);return(0,t.jsxs)("tr",{className:"table-row",children:[(0,t.jsx)("td",{className:"table-cell col-domain",children:(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"table-cell-text-primary truncate",children:e.domain}),(0,t.jsxs)("div",{className:"md:hidden table-cell-text-secondary text-xs mt-1 space-y-1",children:[(0,t.jsx)("div",{className:"truncate",children:e.provider}),(0,t.jsxs)("div",{className:"lg:hidden text-xs text-muted-foreground flex items-center gap-1",children:[(0,t.jsx)(h.Z,{size:12}),(0,t.jsx)("span",{className:"truncate",children:e.notificationDate})]})]})]})}),(0,t.jsx)("td",{className:"table-cell col-provider hidden md:table-cell",children:(0,t.jsx)("div",{className:"table-cell-text-secondary truncate",children:e.provider})}),(0,t.jsx)("td",{className:"table-cell col-date hidden lg:table-cell",children:(0,t.jsxs)("div",{className:"table-cell-text-secondary text-xs flex items-center gap-1",children:[(0,t.jsx)(h.Z,{size:12,className:"flex-shrink-0"}),(0,t.jsx)("span",{className:"truncate",children:e.notificationDate})]})}),(0,t.jsx)("td",{className:"table-cell col-method",children:(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium text-white ".concat(a.color),children:[(0,t.jsx)("span",{className:"hidden sm:inline",children:a.label}),(0,t.jsx)("span",{className:"sm:hidden",children:a.label.substring(0,3)})]})}),(0,t.jsx)("div",{className:"md:hidden text-xs text-muted-foreground mt-1",children:(0,t.jsx)("span",{className:"truncate",children:"domain"===s?"Notif. de dominio":"Notif. de hosting"})})]})}),(0,t.jsx)("td",{className:"table-cell col-actions text-right",children:(0,t.jsx)("button",{onClick:()=>N(e.id,e.domain),className:"text-red-500 hover:text-red-400 transition-colors p-1.5 rounded-md hover:bg-red-900/20 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",title:"Eliminar notificaci\xf3n",children:(0,t.jsx)(z.Z,{size:14})})})]},e.id)}),0===j.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,className:"table-cell text-center text-muted-foreground py-8",children:(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,t.jsx)(c.Z,{className:"w-8 h-8 text-muted-foreground/50"}),(0,t.jsxs)("span",{children:["No hay notificaciones para ","domain"===s?"dominios":"servicios de hosting"]}),(0,t.jsx)("span",{className:"text-xs",children:"Las notificaciones aparecer\xe1n aqu\xed autom\xe1ticamente"})]})})})]})]})})}),(0,t.jsx)(T,{isOpen:u.isOpen,onClose:()=>{p({isOpen:!1,notificationId:"",notificationDomain:""})},onConfirm:b,title:"Confirmar eliminaci\xf3n",message:'\xbfEst\xe1s seguro de que quieres eliminar la notificaci\xf3n para "'.concat(u.notificationDomain,'"? Esta acci\xf3n no se puede deshacer.'),confirmText:"Eliminar",cancelText:"Cancelar",type:"danger"})]})};let U=()=>{let{addNotification:e}=W(),{domains:s}=g(),{hostings:a}=q(),[l,n]=(0,i.useState)("domain"),[r,o]=(0,i.useState)(""),[d,m]=(0,i.useState)(w()),[x,u]=(0,i.useState)("Email"),[p,j]=(0,i.useState)(""),f=()=>"domain"===l?s.map(e=>({id:e.id,name:e.name,provider:e.website,expirationDate:e.expirationDate||function(e,s){let a=new Date(e);switch(s){case"1 year":default:a.setFullYear(a.getFullYear()+1);break;case"2 years":a.setFullYear(a.getFullYear()+2);break;case"3 years":a.setFullYear(a.getFullYear()+3)}return k(a)}(e.creationDate,e.paymentPeriod),creationDate:e.creationDate,paymentPeriod:e.paymentPeriod})):a.map(e=>({id:e.id,name:e.domain,provider:e.provider,expirationDate:function(e,s){let a=new Date(e);switch(s){case"Monthly":default:a.setMonth(a.getMonth()+1);break;case"Annual":a.setFullYear(a.getFullYear()+1);break;case"Biennial":a.setFullYear(a.getFullYear()+2)}return k(a)}(e.registrationDate,e.paymentType),registrationDate:e.registrationDate,paymentType:e.paymentType}));(0,i.useEffect)(()=>{if(r){let e=f().find(e=>e.id===r);e&&e.expirationDate&&(m(function(e,s){let a=new Date(e);return a.setDate(a.getDate()-1),k(a)}(e.expirationDate,0)),j(e.expirationDate))}else m(w()),j("")},[r,l,s,a]),(0,i.useEffect)(()=>{o(""),m(w()),j("")},[l]);let N=async s=>{if(s.preventDefault(),!r||!d||!x)return;let a=f().find(e=>e.id===r);if(a)try{await e({type:l,domain:a.name,provider:a.provider,notificationDate:d,notificationMethod:x}),o(""),m(w()),u("Email"),j("")}catch(e){console.error("Error al agregar notificaci\xf3n:",e)}},v=e=>{switch(e){case"Email":return(0,t.jsx)(_.Z,{size:16});case"WhatsApp":return(0,t.jsx)(V.Z,{size:16});default:return(0,t.jsx)(c.Z,{size:16})}};return(0,t.jsxs)("div",{className:"form-section",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4 sm:mb-6",children:[(0,t.jsx)(b.Z,{className:"h-5 w-5 text-primary"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Configurar Notificaci\xf3n"})]}),(0,t.jsxs)("form",{onSubmit:N,className:"space-y-4 sm:space-y-6",children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"notification-type",className:"form-label",children:"Tipo de servicio *"}),(0,t.jsxs)("select",{id:"notification-type",value:l,onChange:e=>n(e.target.value),className:"form-input",required:!0,children:[(0,t.jsx)("option",{value:"domain",children:"Dominio"}),(0,t.jsx)("option",{value:"hosting",children:"Hosting"})]})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsxs)("label",{htmlFor:"service-select",className:"form-label",children:["domain"===l?"Dominio":"Servicio de Hosting"," *"]}),(0,t.jsxs)("select",{id:"service-select",value:r,onChange:e=>o(e.target.value),className:"form-input",required:!0,children:[(0,t.jsxs)("option",{value:"",children:["Selecciona ","domain"===l?"un dominio":"un servicio"]}),f().map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]}),r&&p&&(0,t.jsxs)("div",{className:"mt-2 p-3 bg-blue-950/40 rounded-lg border border-blue-800",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(h.Z,{size:14,className:"text-blue-400"}),(0,t.jsxs)("span",{className:"text-blue-300",children:[(0,t.jsx)("strong",{children:"Fecha de vencimiento:"})," ",p]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm mt-1",children:[(0,t.jsx)(c.Z,{size:14,className:"text-green-400"}),(0,t.jsxs)("span",{className:"text-green-300",children:[(0,t.jsx)("strong",{children:"Notificaci\xf3n programada para:"})," ",d]})]}),(0,t.jsx)("p",{className:"text-xs text-blue-400 mt-1",children:"La notificaci\xf3n se enviar\xe1 autom\xe1ticamente 1 d\xeda antes del vencimiento"})]})]}),(0,t.jsxs)("fieldset",{className:"form-group",children:[(0,t.jsx)("legend",{className:"form-label",children:"M\xe9todo de notificaci\xf3n *"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3 mt-2",children:["Email","WhatsApp"].map(e=>(0,t.jsxs)("label",{htmlFor:"method-".concat(e.toLowerCase()),className:"flex items-center gap-2 p-3 rounded-lg border border-input cursor-pointer hover:bg-accent transition-colors",children:[(0,t.jsx)("input",{type:"radio",id:"method-".concat(e.toLowerCase()),name:"notificationMethod",value:e,checked:x===e,onChange:e=>u(e.target.value),className:"sr-only"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 ".concat(x===e?"text-primary":"text-muted-foreground"),children:[v(e),(0,t.jsx)("span",{className:"text-sm font-medium",children:e})]})]},e))})]}),(0,t.jsx)("div",{className:"flex flex-col sm:flex-row justify-end pt-4 gap-3",children:(0,t.jsx)("button",{type:"submit",className:"btn-primary w-full sm:w-auto min-w-[140px]",disabled:!r||!d||!x,children:"Programar Notificaci\xf3n"})})]})]})};function $(){return(0,t.jsxs)("div",{className:"page-container",children:[(0,t.jsxs)("div",{className:"section-header",children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold tracking-tight text-foreground",children:"Centro de Notificaciones"}),(0,t.jsx)("p",{className:"section-description",children:"Revisa todas las notificaciones y alertas del sistema. Mantente informado sobre el estado de tus servicios."})]}),(0,t.jsxs)("div",{className:"content-section",children:[(0,t.jsxs)("div",{className:"section-header",children:[(0,t.jsx)("h2",{className:"section-title",children:"Configurar Nueva Notificaci\xf3n"}),(0,t.jsx)("p",{className:"section-description",children:"Programa notificaciones personalizadas para tus dominios y servicios de hosting. La fecha se calcula autom\xe1ticamente como fecha de vencimiento - 1 d\xeda."})]}),(0,t.jsx)(U,{})]}),(0,t.jsxs)("div",{className:"content-section",children:[(0,t.jsxs)("div",{className:"section-header",children:[(0,t.jsx)("h2",{className:"section-title",children:"Notificaciones de Dominios"}),(0,t.jsx)("p",{className:"section-description",children:"Alertas y notificaciones relacionadas con tus dominios"})]}),(0,t.jsx)(J,{type:"domain"})]}),(0,t.jsxs)("div",{className:"content-section",children:[(0,t.jsxs)("div",{className:"section-header",children:[(0,t.jsx)("h2",{className:"section-title",children:"Notificaciones de Hosting"}),(0,t.jsx)("p",{className:"section-description",children:"Alertas y notificaciones sobre tus servicios de hosting"})]}),(0,t.jsx)(J,{type:"hosting"})]})]})}var K=a(91),Q=e=>{let{isOpen:s}=e;return s?(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),(0,t.jsx)("div",{className:"relative bg-white dark:bg-gray-900 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 p-8 max-w-md w-full mx-4",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"relative mx-auto w-20 h-20 mb-6",children:[(0,t.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-gray-200 dark:border-gray-700"}),(0,t.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-primary border-t-transparent animate-spin"}),(0,t.jsx)("div",{className:"absolute inset-2 rounded-full bg-primary/10 flex items-center justify-center",children:(0,t.jsx)(K.Z,{className:"w-8 h-8 text-primary animate-pulse"})})]}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Cargando TrackingDude"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Conectando con la base de datos y cargando tus datos..."}),(0,t.jsxs)("div",{className:"space-y-3 text-left",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-primary animate-pulse"}),(0,t.jsx)(m.Z,{className:"w-4 h-4 text-primary"}),(0,t.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"Cargando dominios"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-primary animate-pulse",style:{animationDelay:"0.2s"}}),(0,t.jsx)(r.Z,{className:"w-4 h-4 text-primary"}),(0,t.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"Cargando servicios de hosting"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-primary animate-pulse",style:{animationDelay:"0.4s"}}),(0,t.jsx)(c.Z,{className:"w-4 h-4 text-primary"}),(0,t.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"Cargando notificaciones"})]})]}),(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-primary h-2 rounded-full animate-pulse",style:{width:"75%"}})})}),(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4",children:"Esto solo tomar\xe1 unos segundos..."})]})})]}):null};let X=()=>{let[e,s]=(0,i.useState)("domains"),[a,l]=(0,i.useState)(!1),{loading:n}=g(),{loading:r}=q(),{loading:c}=W();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Q,{isOpen:n||r||c}),(0,t.jsxs)("div",{className:"flex h-screen bg-background",children:[a&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>l(!1)}),(0,t.jsx)("div",{className:"\n          fixed lg:static inset-y-0 left-0 z-50 w-64 transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:transition-none\n          ".concat(a?"translate-x-0":"-translate-x-full","\n        "),children:(0,t.jsx)(d,{onNavigate:e=>{s(e),l(!1)},currentPage:e,onClose:()=>l(!1)})}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col min-h-0",children:[(0,t.jsxs)("div",{className:"lg:hidden bg-card border-b border-border p-4 flex items-center justify-between flex-shrink-0",children:[(0,t.jsx)("button",{onClick:()=>l(!0),className:"p-2 rounded-md text-muted-foreground hover:text-foreground hover:bg-accent",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,t.jsx)("h1",{className:"text-lg font-semibold text-foreground",children:"TrackingDude"}),(0,t.jsx)("div",{className:"w-10"})," "]}),(0,t.jsx)("main",{className:"flex-1 overflow-y-auto bg-background",children:(()=>{switch(e){case"domains":default:return(0,t.jsx)(M,{});case"hosting":return(0,t.jsx)(I,{});case"notifications":return(0,t.jsx)($,{})}})()})]})]})]})};function ee(){return(0,t.jsx)(j,{children:(0,t.jsx)(A,{children:(0,t.jsx)(R,{children:(0,t.jsx)(X,{})})})})}}},function(e){e.O(0,[2,971,117,744],function(){return e(e.s=8987)}),_N_E=e.O()}]);